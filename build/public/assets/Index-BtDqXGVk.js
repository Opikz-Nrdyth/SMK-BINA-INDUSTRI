import{u as le,a as te,c as t,j as r,r as w}from"./app-DYRkOPC9.js";import{D as L}from"./TabelData-DQyWhmS2.js";import{N as oe}from"./Notification-BEIxe041.js";import{S as ue}from"./SuperAdminLayouts-B733UKUY.js";import{M as Ne}from"./ModalView-C3jqS_1x.js";import{U as de}from"./UniversalInput-BbeuxfLS.js";import{S as ce}from"./StafLayouts-fiNuR3H4.js";import{G as me}from"./GuruLayouts-MMs6L_KG.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-I5daD2Uv.js";import"./index-BzCDgUCn.js";import"./TextEditor-DTcgYddk.js";/* empty css                  */function xe({kehadirans:N,kehadiranPaginate:s,searchQuery:$="",namaUjianFilter:F="",listUjian:M}){const{props:o}=le(),{notify:_}=te();t.useEffect(()=>{var e,a,u;(e=o==null?void 0:o.session)!=null&&e.status&&_((a=o==null?void 0:o.session)==null?void 0:a.message,(u=o==null?void 0:o.session)==null?void 0:u.status)},[o.session]);const[S,z]=t.useState([]),[T,R]=t.useState(),[E,g]=t.useState((s==null?void 0:s.currentPage)||1),[A,Ie]=t.useState((s==null?void 0:s.lastPage)||1),[D,J]=t.useState($),[B,W]=t.useState(F),[c,b]=t.useState("mapel"),[n,K]=t.useState(null),[l,v]=t.useState(null),[k,h]=t.useState([]),[pe,O]=t.useState(1),[f,G]=t.useState("");t.useEffect(()=>{if(!N)return;const e=[];N.map(a=>{var u,m,i,d,I,p,j,x,y,C;e.push({...a,id:a==null?void 0:a.id,namaSiswa:((u=a==null?void 0:a.user)==null?void 0:u.fullName)||"-",email:((m=a==null?void 0:a.user)==null?void 0:m.email)||"-",nisn:((d=(i=a==null?void 0:a.user)==null?void 0:i.dataSiswa)==null?void 0:d.nisn)||"-",namaUjian:((I=a==null?void 0:a.ujian)==null?void 0:I.namaUjian)||"-",jenisUjian:((p=a==null?void 0:a.ujian)==null?void 0:p.jenisUjian)||"-",mapel:((x=(j=a==null?void 0:a.ujian)==null?void 0:j.mapel)==null?void 0:x.namaMataPelajaran)||"-",mapelId:((C=(y=a==null?void 0:a.ujian)==null?void 0:y.mapel)==null?void 0:C.id)||"-"})}),z(e)},[N]);const q=M.reduce((e,a)=>{var I,p,j;const u=((I=a.mapel)==null?void 0:I.namaMataPelajaran)||"Tidak ada mapel",m=((p=a.mapel)==null?void 0:p.jenjang)||"Tidak ada mapel",i=((j=a.mapel)==null?void 0:j.id)||"no-id";e[i]||(e[i]={id:i,namaMapel:u,jenjang:m,jumlahUjian:0,jumlahSiswa:0,ujianList:[]});const d=S.filter(x=>(x==null?void 0:x.ujianId)===a.id);return e[i].jumlahUjian+=1,e[i].jumlahSiswa+=d.length,e[i].ujianList.push({id:a.id,namaUjian:a.namaUjian,siswa:d}),e},{}),H=e=>{K(e),b("siswa"),O(1),G(""),h([{label:"Semua Mapel",action:()=>U()},{label:e.namaMapel,action:()=>{}}])},Q=e=>{v(e),b("detail"),h([{label:"Semua Mapel",action:()=>U()},{label:n.namaMapel,action:()=>X()},{label:e.namaSiswa,action:()=>{}}])},U=()=>{K(null),v(null),b("mapel"),h([])},X=()=>{v(null),b("siswa"),h([{label:"Semua Mapel",action:()=>U()},{label:n.namaMapel,action:()=>{}}])},V=n?Array.from(new Map(S.filter(e=>(e==null?void 0:e.mapelId)===n.id).map(e=>[e==null?void 0:e.userId,e])).values()):[],Y=l?S.filter(e=>(e==null?void 0:e.userId)===l.userId&&(e==null?void 0:e.mapelId)===n.id):[],Z=e=>{const a=S.filter(i=>(i==null?void 0:i.userId)===e.userId&&(i==null?void 0:i.mapelId)===n.id),u=a.length,m=u>0?(a.reduce((i,d)=>i+parseFloat((d==null?void 0:d.skor)||0),0)/u).toFixed(2):0;return{totalUjian:u,rataRataSkor:m}},ee=M.map(e=>{var a;return{label:`${e==null?void 0:e.namaUjian}/${(a=e==null?void 0:e.mapel)==null?void 0:a.namaMataPelajaran}`,value:e==null?void 0:e.id}}),P=e=>{w.get(`/${baseUrl}/manajemen-kehadiran`,{page:e,search:D,nama_ujian:B},{preserveState:!0,replace:!0}),g(e)},ae=e=>{J(e),w.get(`/${baseUrl}/manajemen-kehadiran`,{page:1,search:e,nama_ujian:B},{preserveState:!0,replace:!0,preserveScroll:!0}),g(1)},re=e=>{W(e),w.get(`/${baseUrl}/manajemen-kehadiran`,{page:1,search:D,nama_ujian:e},{preserveState:!0,replace:!0,preserveScroll:!0}),g(1)},ie=e=>{G(e)},ne=V.filter(e=>e.namaSiswa.toLowerCase().includes(f.toLowerCase())||e.nisn.toLowerCase().includes(f.toLowerCase())||e.email.toLowerCase().includes(f.toLowerCase())),se=()=>r.jsxDEV("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:r.jsxDEV("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:k.map((e,a)=>r.jsxDEV("li",{className:"inline-flex items-center",children:[a>0&&r.jsxDEV("svg",{className:"w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:r.jsxDEV("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:258,columnNumber:17},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:251,columnNumber:15},this),r.jsxDEV("button",{onClick:e.action,className:`inline-flex items-center text-sm font-medium ${a===k.length-1?"text-gray-500 dark:text-gray-400 cursor-default":"text-gray-700 hover:text-purple-600 dark:text-gray-400 dark:hover:text-white cursor-pointer transition-colors duration-200"}`,children:e.label},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:267,columnNumber:13},this)]},a,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:249,columnNumber:11},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:247,columnNumber:7},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:246,columnNumber:5},this);return r.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[r.jsxDEV(oe,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:285,columnNumber:7},this),r.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[r.jsxDEV("div",{children:[r.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[c==="mapel"&&"Data Mata Pelajaran",c==="siswa"&&`Siswa - ${n==null?void 0:n.namaMapel}`,c==="detail"&&`Detail Kehadiran - ${l==null?void 0:l.namaSiswa}`]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:290,columnNumber:11},this),k.length>0&&se()]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:289,columnNumber:9},this),n&&r.jsxDEV("a",{href:`${o.pattern}/cetak?mapel=${n==null?void 0:n.namaMapel}`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200",children:[r.jsxDEV("i",{className:"fa-solid fa-file-excel"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:302,columnNumber:13},this)," Export Excell"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:298,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:288,columnNumber:7},this),c==="mapel"&&r.jsxDEV("div",{className:"mb-4",children:r.jsxDEV(de,{name:"ujian",type:"select",options:ee,placeholder:"Filter berdasarkan nama ujian...",value:B,onChange:e=>re(e)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:310,columnNumber:11},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:309,columnNumber:9},this),c==="mapel"&&r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(q).map(e=>r.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-purple-200 dark:border-purple-800 hover:shadow-lg transition-shadow cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",onClick:()=>H(e),children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[r.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[e.namaMapel," (",e.jenjang,")"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:331,columnNumber:17},this),r.jsxDEV("svg",{className:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:340,columnNumber:19},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:334,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:330,columnNumber:15},this),r.jsxDEV("div",{className:"space-y-2",children:[r.jsxDEV("div",{className:"flex justify-between text-sm",children:[r.jsxDEV("span",{className:"text-gray-600 dark:text-gray-400",children:"Jumlah Ujian:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:351,columnNumber:19},this),r.jsxDEV("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:e.jumlahUjian},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:352,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:350,columnNumber:17},this),r.jsxDEV("div",{className:"flex justify-between text-sm",children:[r.jsxDEV("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Siswa:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:357,columnNumber:19},this),r.jsxDEV("span",{className:"font-medium text-pink-600 dark:text-pink-400",children:e.jumlahSiswa},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:358,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:356,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:349,columnNumber:15},this),r.jsxDEV("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxDEV("p",{className:"text-xs text-purple-500 dark:text-purple-400",children:"Klik untuk melihat daftar siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:365,columnNumber:17},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:364,columnNumber:15},this)]},e.id,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:325,columnNumber:13},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:323,columnNumber:9},this),c==="siswa"&&r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-purple-200 dark:border-purple-800",children:[r.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Daftar Siswa - ",n==null?void 0:n.namaMapel]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:378,columnNumber:13},this),r.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total ",V.length," siswa"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:381,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:377,columnNumber:11},this),r.jsxDEV(L,{data:ne.map(e=>({...e,...Z(e)})),tabelName:"Siswa",columns:[{header:"NISN",accessor:"nisn"},{header:"Nama Siswa",accessor:"namaSiswa"},{header:"Total Ujian",accessor:"totalUjian"},{header:"Rata-rata Skor",accessor:"rataRataSkor"}],pageSize:15,placeholder:"Cari NISN, nama, atau email...",noDataText:"Tidak ada data siswa",onRowClick:e=>Q(e),viewModal:!0,serverSearch:{value:f,onChange:ie},serverPagination:{currentPage:E,lastPage:A,total:(s==null?void 0:s.total)||0,onPageChange:P}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:386,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:376,columnNumber:9},this),c==="detail"&&r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-purple-200 dark:border-purple-800",children:[r.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Detail Kehadiran - ",l==null?void 0:l.namaSiswa]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:427,columnNumber:13},this),r.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["NISN: ",l==null?void 0:l.nisn," â€¢ Email: ",l==null?void 0:l.email]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:430,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:426,columnNumber:11},this),r.jsxDEV(L,{data:Y,tabelName:"Kehadiran",columns:[{header:"Nama Ujian",accessor:"namaUjian"},{header:"Jenis Ujian",accessor:"jenisUjian"},{header:"Skor",accessor:"skor"},{header:"Benar",accessor:"benar"},{header:"Salah",accessor:"salah"},{header:"Tanggal Ujian",isTime:{mode:"date",withDay:!0},accessor:"createdAt"}],pageSize:15,placeholder:"Cari nama ujian...",noDataText:"Tidak ada data kehadiran",onRowClick:e=>R(e),viewModal:!0,serverPagination:{currentPage:E,lastPage:A,total:(s==null?void 0:s.total)||0,onPageChange:P},serverSearch:{value:D,onChange:ae}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:435,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:425,columnNumber:9},this),r.jsxDEV(Ne,{data:T,exclude:["*id","userId","ujianId","jawabanFile","ujian.jurusan","ujian.penulis","ujian.mapel.guruAmpu","*mapelId","user"],open:!!T,onClose:()=>R(null)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:469,columnNumber:7},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:284,columnNumber:5},this)}xe.layout=N=>{const s=N.props.activeRole??N.props.user.role;return s=="Staf"?r.jsxDEV(ce,{children:N},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:492,columnNumber:12},void 0):s=="Guru"?r.jsxDEV(me,{children:N},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:495,columnNumber:12},void 0):r.jsxDEV(ue,{children:N},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:498,columnNumber:10},void 0)};export{xe as default};
