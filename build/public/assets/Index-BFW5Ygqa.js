import{u as U,c as i,j as a,L as o,r as x}from"./app-DOohHWgQ.js";import{D as v}from"./TabelData-DGHRNWzx.js";import{N as M}from"./Notification-B_ZYjg_J.js";import{S as A}from"./SuperAdminLayouts-CYBBGocV.js";import{M as G}from"./ModalView-DYmK8HnX.js";import{G as E}from"./GuruLayouts-aj8x1ubP.js";import{S as T}from"./StafLayouts-CI4WFWbe.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-XWpU8_K7.js";function R({bankSoals:t,bankSoalPaginate:r,searchQuery:j="",auth:l}){const{props:f}=U(),[I,h]=i.useState([]),[u,d]=i.useState(),[S,c]=i.useState((r==null?void 0:r.currentPage)||1),[D,V]=i.useState((r==null?void 0:r.lastPage)||1),[B,g]=i.useState(j),s=f.pattern;i.useEffect(()=>{if(!t)return;const e=[];t.map(n=>{var m,N,p;e.push({...n,id:n.id,jurusan:((m=n.jurusanDetails)==null?void 0:m.join(", "))||"-",penulis:((N=n.penulisDetails)==null?void 0:N.join(", "))||"-",mapel:((p=n.mapelDetails)==null?void 0:p.join(", "))||"-",kode:n.kode||"-"})}),h(e)},[t]);const b=e=>{x.get(String(s),{page:e},{preserveState:!0,replace:!0}),c(e)},k=e=>{g(e),x.get(String(s),{page:1,search:e},{preserveState:!0,replace:!0,preserveScroll:!0}),c(1)};return a.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[a.jsxDEV(M,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:75,columnNumber:7},this),a.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[a.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Data Bank Soal"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:77,columnNumber:9},this),a.jsxDEV("div",{className:"flex gap-1 items-center",children:[a.jsxDEV(o,{href:`${s}/create`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Tambah Bank Soal"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:79,columnNumber:11},this),a.jsxDEV(o,{href:`${s}/data-password`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Data Password"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:78,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:76,columnNumber:7},this),a.jsxDEV(v,{data:I,tabelName:"BankSoal",columns:[{header:"Jenis Ujian",accessor:"jenisUjian"},{header:"Nama Ujian",accessor:"namaUjian"},{header:"Kode Ujian",accessor:"kode"},{header:"Jenjang",accessor:"jenjang"},{header:"Mata Pelajaran",accessor:"mapel"},{header:"Jurusan",accessor:"jurusan"},{header:"Penulis",accessor:"penulis"},{header:"Waktu (menit)",accessor:"waktu"},{header:"Tanggal Ujian",isTime:{mode:"date",withDay:!0},accessor:"tanggalUjian"},{header:"Aksi",accessor:"actions",action:e=>a.jsxDEV(o,{className:"text-blue-600 font-bold hover:underline text-nowrap",href:`${s}/${e.id}/edit-soal`,children:"Edit Soal"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:115,columnNumber:15},this)}],editable:String(s),pageSize:15,placeholder:"Cari bank soal berdasarkan kode, nama ujian, jenjang, atau jenis ujian...",noDataText:"Tidak ada data bank soal",disableConfig:{canEdit:e=>l.role==="Guru"?e.jenisUjian==="Ujian Mandiri"&&e.penulis==l.fullName:!0,canDelete:e=>l.role==="Guru"?e.jenisUjian==="Ujian Mandiri"&&e.penulis==l.fullName:!0,canView:e=>!0,disabledMessage:"Guru hanya dapat mengubah Ujian Mandiri yang dibuat sendiri"},onRowClick:e=>d(()=>{var n;return{...e,mapel:(n=e.mapelDetails)==null?void 0:n[0],diBuat:e.createdAt,diUpdate:e.updatedAt}}),serverPagination:{currentPage:S,lastPage:D,total:(r==null?void 0:r.total)||0,onPageChange:b},serverSearch:{value:B,onChange:k}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:94,columnNumber:7},this),a.jsxDEV(G,{data:u,exclude:["*id","soalFile","jurusanDetails","penulisDetails","mapelDetails","mapelId","createdAt","updatedAt","jurusan","penulis","mapel"],open:!!u,onClose:()=>d(null),title:"Detail Bank Soal"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:164,columnNumber:7},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:74,columnNumber:5},this)}R.layout=t=>{const r=t.props.activeRole??t.props.user.role;return r=="Guru"?a.jsxDEV(E,{children:t},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:190,columnNumber:12},void 0):r=="Staf"?a.jsxDEV(T,{children:t},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:193,columnNumber:12},void 0):a.jsxDEV(A,{children:t},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:196,columnNumber:10},void 0)};export{R as default};
