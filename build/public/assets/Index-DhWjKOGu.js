import{u as ne,c as s,j as a,r as v}from"./app-DOohHWgQ.js";import{D as C}from"./TabelData-DGHRNWzx.js";import{N as se}from"./Notification-B_ZYjg_J.js";import{S as le}from"./SuperAdminLayouts-CYBBGocV.js";import{M as oe}from"./ModalView-DYmK8HnX.js";import{U as me}from"./UniversalInput-DrLPzoXR.js";import{S as ue}from"./StafLayouts-CI4WFWbe.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-XWpU8_K7.js";import"./index-BzCDgUCn.js";import"./TextEditor-CgTkcBzV.js";/* empty css                  */function Ne({kehadirans:m,kehadiranPaginate:t,searchQuery:L="",namaUjianFilter:$="",listUjian:k}){const{props:F}=ne(),[x,_]=s.useState([]),[w,U]=s.useState(),[M,h]=s.useState((t==null?void 0:t.currentPage)||1),[T,de]=s.useState((t==null?void 0:t.lastPage)||1),[b,z]=s.useState(L),[f,J]=s.useState($),[N,I]=s.useState("mapel"),[n,R]=s.useState(null),[r,g]=s.useState(null),[D,p]=s.useState([]),[ce,W]=s.useState(1),[S,A]=s.useState("");s.useEffect(()=>{if(!m)return;const e=[];m.map(i=>{var u,l,o,d,c,j,V,G,P,y;e.push({...i,id:i.id,namaSiswa:((u=i==null?void 0:i.user)==null?void 0:u.fullName)||"-",email:((l=i==null?void 0:i.user)==null?void 0:l.email)||"-",nisn:((d=(o=i==null?void 0:i.user)==null?void 0:o.dataSiswa)==null?void 0:d.nisn)||"-",namaUjian:((c=i==null?void 0:i.ujian)==null?void 0:c.namaUjian)||"-",jenisUjian:((j=i==null?void 0:i.ujian)==null?void 0:j.jenisUjian)||"-",mapel:((G=(V=i==null?void 0:i.ujian)==null?void 0:V.mapel)==null?void 0:G.namaMataPelajaran)||"-",mapelId:((y=(P=i==null?void 0:i.ujian)==null?void 0:P.mapel)==null?void 0:y.id)||"-"})}),_(e)},[m]);const O=k.reduce((e,i)=>{var d,c;const u=((d=i.mapel)==null?void 0:d.namaMataPelajaran)||"Tidak ada mapel",l=((c=i.mapel)==null?void 0:c.id)||"no-id";e[l]||(e[l]={id:l,namaMapel:u,jumlahUjian:0,jumlahSiswa:0,ujianList:[]});const o=x.filter(j=>j.ujianId===i.id);return e[l].jumlahUjian+=1,e[l].jumlahSiswa+=o.length,e[l].ujianList.push({id:i.id,namaUjian:i.namaUjian,siswa:o}),e},{}),q=e=>{R(e),I("siswa"),W(1),A(""),p([{label:"Semua Mapel",action:()=>B()},{label:e.namaMapel,action:()=>{}}])},H=e=>{g(e),I("detail"),p([{label:"Semua Mapel",action:()=>B()},{label:n.namaMapel,action:()=>Q()},{label:e.namaSiswa,action:()=>{}}])},B=()=>{R(null),g(null),I("mapel"),p([])},Q=()=>{g(null),I("siswa"),p([{label:"Semua Mapel",action:()=>B()},{label:n.namaMapel,action:()=>{}}])},E=n?Array.from(new Map(x.filter(e=>e.mapelId===n.id).map(e=>[e.userId,e])).values()):[],X=r?x.filter(e=>e.userId===r.userId&&e.mapelId===n.id):[],Y=e=>{const i=x.filter(o=>o.userId===e.userId&&o.mapelId===n.id),u=i.length,l=u>0?(i.reduce((o,d)=>o+parseFloat(d.skor||0),0)/u).toFixed(2):0;return{totalUjian:u,rataRataSkor:l}},Z=k.map(e=>({label:`${e.namaUjian}/${e.mapel.namaMataPelajaran}`,value:e.id})),K=e=>{v.get("/SuperAdmin/manajemen-kehadiran",{page:e,search:b,nama_ujian:f},{preserveState:!0,replace:!0}),h(e)},ee=e=>{z(e),v.get("/SuperAdmin/manajemen-kehadiran",{page:1,search:e,nama_ujian:f},{preserveState:!0,replace:!0,preserveScroll:!0}),h(1)},ae=e=>{J(e),v.get("/SuperAdmin/manajemen-kehadiran",{page:1,search:b,nama_ujian:e},{preserveState:!0,replace:!0,preserveScroll:!0}),h(1)},ie=e=>{A(e)},re=E.filter(e=>e.namaSiswa.toLowerCase().includes(S.toLowerCase())||e.nisn.toLowerCase().includes(S.toLowerCase())||e.email.toLowerCase().includes(S.toLowerCase())),te=()=>a.jsxDEV("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:a.jsxDEV("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:D.map((e,i)=>a.jsxDEV("li",{className:"inline-flex items-center",children:[i>0&&a.jsxDEV("svg",{className:"w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:a.jsxDEV("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:243,columnNumber:17},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:236,columnNumber:15},this),a.jsxDEV("button",{onClick:e.action,className:`inline-flex items-center text-sm font-medium ${i===D.length-1?"text-gray-500 dark:text-gray-400 cursor-default":"text-gray-700 hover:text-purple-600 dark:text-gray-400 dark:hover:text-white cursor-pointer transition-colors duration-200"}`,children:e.label},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:252,columnNumber:13},this)]},i,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:234,columnNumber:11},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:232,columnNumber:7},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:231,columnNumber:5},this);return a.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[a.jsxDEV(se,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:270,columnNumber:7},this),a.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[a.jsxDEV("div",{children:[a.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[N==="mapel"&&"Data Mata Pelajaran",N==="siswa"&&`Siswa - ${n==null?void 0:n.namaMapel}`,N==="detail"&&`Detail Kehadiran - ${r==null?void 0:r.namaSiswa}`]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:275,columnNumber:11},this),D.length>0&&te()]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:274,columnNumber:9},this),n&&a.jsxDEV("a",{href:`${F.pattern}/cetak`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200",children:[a.jsxDEV("i",{className:"fa-solid fa-file-excel"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:287,columnNumber:13},this)," Export Excell"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:283,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:273,columnNumber:7},this),N==="mapel"&&a.jsxDEV("div",{className:"mb-4",children:a.jsxDEV(me,{name:"ujian",type:"select",options:Z,placeholder:"Filter berdasarkan nama ujian...",value:f,onChange:e=>ae(e)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:295,columnNumber:11},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:294,columnNumber:9},this),N==="mapel"&&a.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(O).map(e=>a.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-purple-200 dark:border-purple-800 hover:shadow-lg transition-shadow cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",onClick:()=>q(e),children:[a.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[a.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.namaMapel},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:316,columnNumber:17},this),a.jsxDEV("svg",{className:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:325,columnNumber:19},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:319,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:315,columnNumber:15},this),a.jsxDEV("div",{className:"space-y-2",children:[a.jsxDEV("div",{className:"flex justify-between text-sm",children:[a.jsxDEV("span",{className:"text-gray-600 dark:text-gray-400",children:"Jumlah Ujian:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:336,columnNumber:19},this),a.jsxDEV("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:e.jumlahUjian},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:337,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:335,columnNumber:17},this),a.jsxDEV("div",{className:"flex justify-between text-sm",children:[a.jsxDEV("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Siswa:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:342,columnNumber:19},this),a.jsxDEV("span",{className:"font-medium text-pink-600 dark:text-pink-400",children:e.jumlahSiswa},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:343,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:341,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:334,columnNumber:15},this),a.jsxDEV("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxDEV("p",{className:"text-xs text-purple-500 dark:text-purple-400",children:"Klik untuk melihat daftar siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:350,columnNumber:17},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:349,columnNumber:15},this)]},e.id,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:310,columnNumber:13},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:308,columnNumber:9},this),N==="siswa"&&a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-purple-200 dark:border-purple-800",children:[a.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Daftar Siswa - ",n==null?void 0:n.namaMapel]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:363,columnNumber:13},this),a.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total ",E.length," siswa"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:366,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:362,columnNumber:11},this),a.jsxDEV(C,{data:re.map(e=>({...e,...Y(e)})),tabelName:"Siswa",columns:[{header:"NISN",accessor:"nisn"},{header:"Nama Siswa",accessor:"namaSiswa"},{header:"Total Ujian",accessor:"totalUjian"},{header:"Rata-rata Skor",accessor:"rataRataSkor"}],pageSize:15,placeholder:"Cari NISN, nama, atau email...",noDataText:"Tidak ada data siswa",onRowClick:e=>H(e),viewModal:!0,serverSearch:{value:S,onChange:ie},serverPagination:{currentPage:M,lastPage:T,total:(t==null?void 0:t.total)||0,onPageChange:K}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:371,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:361,columnNumber:9},this),N==="detail"&&a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-purple-200 dark:border-purple-800",children:[a.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Detail Kehadiran - ",r==null?void 0:r.namaSiswa]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:412,columnNumber:13},this),a.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["NISN: ",r==null?void 0:r.nisn," â€¢ Email: ",r==null?void 0:r.email]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:415,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:411,columnNumber:11},this),a.jsxDEV(C,{data:X,tabelName:"Kehadiran",columns:[{header:"Nama Ujian",accessor:"namaUjian"},{header:"Jenis Ujian",accessor:"jenisUjian"},{header:"Skor",accessor:"skor"},{header:"Benar",accessor:"benar"},{header:"Salah",accessor:"salah"},{header:"Tanggal Ujian",isTime:{mode:"date",withDay:!0},accessor:"createdAt"}],pageSize:15,placeholder:"Cari nama ujian...",noDataText:"Tidak ada data kehadiran",onRowClick:e=>U(e),viewModal:!0,serverPagination:{currentPage:M,lastPage:T,total:(t==null?void 0:t.total)||0,onPageChange:K},serverSearch:{value:b,onChange:ee}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:420,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:410,columnNumber:9},this),a.jsxDEV(oe,{data:w,exclude:["*id","userId","ujianId","jawabanFile","ujian.jurusan","ujian.penulis","ujian.mapel.guruAmpu","*mapelId","user"],open:!!w,onClose:()=>U(null)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:454,columnNumber:7},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:269,columnNumber:5},this)}Ne.layout=m=>(m.props.activeRole??m.props.user.role)=="Staf"?a.jsxDEV(ue,{children:m},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:477,columnNumber:12},void 0):a.jsxDEV(le,{children:m},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:480,columnNumber:10},void 0);export{Ne as default};
